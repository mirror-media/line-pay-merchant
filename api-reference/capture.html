<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <script type="application/ld+json">
[ {
  "@context" : "http://schema.org",
  "@type" : "SoftwareApplication",
  "name" : "LINE Pay Merchant",
  "url" : "https://github.com/mirror-media/line-pay-merchant",
  "author" : {
    "@type" : "Organization",
    "name" : "MirrorMedia"
  },
  "datePublished" : "2022-06-09T06:15:47",
  "publisher" : {
    "@type" : "Organization",
    "name" : "MirrorMedia"
  },
  "downloadUrl" : "https://www.npmjs.com/package/@mirrormedia/line-pay-merchant",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "applicationCategory": "DeveloperApplication"
}]
</script><title>Capture API | LINE Pay Merchant</title><meta name="description" content="LINE Pay Merchant is a JavaScript (Node.js) library for integrating LINE Pay V3 Online APIs. The goal of this library is to help developers build reliable LINE Pay applications. It handles tedious jobs to help developers focus on business logic and ideas that produce value.">
    <link rel="preload" href="/line-pay-merchant/assets/style-CNgiieV0.css" as="style"><link rel="stylesheet" href="/line-pay-merchant/assets/style-CNgiieV0.css">
    <link rel="modulepreload" href="/line-pay-merchant/assets/app-Dmg8qoQ-.js"><link rel="modulepreload" href="/line-pay-merchant/assets/capture.html-BY_F39Ys.js">
    <link rel="prefetch" href="/line-pay-merchant/assets/index.html-Dz7mGtom.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/check-payment-status.html-DXOBEXhA.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/check-regkey.html-C66g58bs.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/common.html-k10XvrHu.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/confirm.html-BKfzUsrI.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/expire-regkey.html-BE1RswsK.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/pay-preapproved.html-B78o7LX2.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/payment-details.html-BBDEZ-Zh.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/refund.html-CBUdM7GE.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/request.html-BhIEQ2LP.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/void.html-CjojB97X.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/further-details.html-BH1bkUpc.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/getting-started.html-Cjioq1oG.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/handlers.html-B1v2BVud.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/404.html-BVHQao8W.js" as="script"><link rel="prefetch" href="/line-pay-merchant/assets/setupDevtools-7MC2TMWH-CxbJN4QF.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/line-pay-merchant/"><!----><span class="vp-site-name" aria-hidden="true">LINE Pay Merchant</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/line-pay-merchant/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/line-pay-merchant/guide/getting-started.html" aria-label="Guide"><!---->Guide<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/line-pay-merchant/api-reference/request.html" aria-label="API Reference"><!---->API Reference<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Resources"><span class="title">Resources</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Resources"><span class="title">Resources</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Official Documentation</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://pay.line.me/tw/developers/apis/onlineApis?locale=en_US" aria-label="Online API V3 Guide" rel="noopener noreferrer" target="_blank"><!---->Online API V3 Guide<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://pay.line.me/tw/developers/techsupport/sandbox/testflow?locale=en_US" aria-label="Test flow" rel="noopener noreferrer" target="_blank"><!---->Test flow<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://pay.line.me/tw/developers/techsupport/sandbox/channel?locale=en_US" aria-label="Channel ID &amp; SK" rel="noopener noreferrer" target="_blank"><!---->Channel ID &amp; SK<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Installation</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://www.npmjs.com/package/@mirrormedia/line-pay-merchant" aria-label="npm" rel="noopener noreferrer" target="_blank"><!---->npm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://yarnpkg.com/package/@mirrormedia/line-pay-merchant" aria-label="Yarn" rel="noopener noreferrer" target="_blank"><!---->Yarn<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/mirror-media/line-pay-merchant" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/line-pay-merchant/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/line-pay-merchant/guide/getting-started.html" aria-label="Guide"><!---->Guide<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/line-pay-merchant/api-reference/request.html" aria-label="API Reference"><!---->API Reference<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Resources"><span class="title">Resources</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Resources"><span class="title">Resources</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Official Documentation</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://pay.line.me/tw/developers/apis/onlineApis?locale=en_US" aria-label="Online API V3 Guide" rel="noopener noreferrer" target="_blank"><!---->Online API V3 Guide<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://pay.line.me/tw/developers/techsupport/sandbox/testflow?locale=en_US" aria-label="Test flow" rel="noopener noreferrer" target="_blank"><!---->Test flow<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://pay.line.me/tw/developers/techsupport/sandbox/channel?locale=en_US" aria-label="Channel ID &amp; SK" rel="noopener noreferrer" target="_blank"><!---->Channel ID &amp; SK<!----></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Installation</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://www.npmjs.com/package/@mirrormedia/line-pay-merchant" aria-label="npm" rel="noopener noreferrer" target="_blank"><!---->npm<!----></a></li><li class="vp-navbar-dropdown-subitem"><a class="auto-link external-link" href="https://yarnpkg.com/package/@mirrormedia/line-pay-merchant" aria-label="Yarn" rel="noopener noreferrer" target="_blank"><!---->Yarn<!----></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/mirror-media/line-pay-merchant" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!---->GitHub<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Reference <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/request.html" aria-label="Request API"><!---->Request API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/confirm.html" aria-label="Confirm API"><!---->Confirm API<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/line-pay-merchant/api-reference/capture.html" aria-label="Capture API"><!---->Capture API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/void.html" aria-label="Void API"><!---->Void API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/refund.html" aria-label="Refund API"><!---->Refund API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/payment-details.html" aria-label="Payment Details API"><!---->Payment Details API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/check-payment-status.html" aria-label="Check Payment Status API"><!---->Check Payment Status API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/check-regkey.html" aria-label="Check RegKey API"><!---->Check RegKey API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/pay-preapproved.html" aria-label="Pay Preapproved API"><!---->Pay Preapproved API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/expire-regkey.html" aria-label="Expire RegKey API"><!---->Expire RegKey API<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/line-pay-merchant/api-reference/common.html" aria-label="Common Types"><!---->Common Types<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="capture-api" tabindex="-1"><a class="header-anchor" href="#capture-api"><span>Capture API</span></a></h1><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview"><span>Overview</span></a></h2><p>Transactions that have set options.payment.capture as <code>false</code> when requesting the Request API payment will be put on hold when the payment is completed with the Confirm API. In order to finalize the payment, an additional purchase with Capture API is required.</p><ul><li><a href="#send"><code>send</code></a></li><li><a href="#addhandler"><code>addHandler</code></a></li><li><a href="#addhandlers"><code>addHandlers</code></a></li></ul><h2 id="send" tabindex="-1"><a class="header-anchor" href="#send"><span>send</span></a></h2><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">send</span><span class="token punctuation">(</span>captureRequestConfig<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>Returns <code>Promise&lt;ApiResponse&lt;CaptureResponseBody&gt;&gt;</code></p><h3 id="request-config" tabindex="-1"><a class="header-anchor" href="#request-config"><span>Request Config</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Options</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  extra<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token doc-comment comment">/**</span>
<span class="line">     * 點數限制資訊 (Taiwan only)</span>
<span class="line">     *</span>
<span class="line">     * - useLimit: 不可使用點數折抵的金額</span>
<span class="line">     * - rewardLimit: 不可回饋點數的金額</span>
<span class="line">     * ```json</span>
<span class="line">     * &quot;promotionRestriction&quot;: <span class="token punctuation">{</span></span>
<span class="line">     *     &quot;useLimit&quot;: 100,</span>
<span class="line">     *     &quot;rewardLimit&quot;: 100</span>
<span class="line">     * <span class="token punctuation">}</span></span>
<span class="line">     * ```</span>
<span class="line">     */</span></span>
<span class="line">    promotionRestriction<span class="token operator">:</span> Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CaptureRequestBody</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Payment amount</span>
<span class="line">   */</span></span>
<span class="line">  amount<span class="token operator">:</span> <span class="token builtin">number</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Payment currency (ISO 4217)</span>
<span class="line">   * - Supported currencies: USD, JPY, TWD, THB</span>
<span class="line">   */</span></span>
<span class="line">  currency<span class="token operator">:</span> <span class="token builtin">string</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Options</span>
<span class="line">   */</span></span>
<span class="line">  options<span class="token operator">?</span><span class="token operator">:</span> Options</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CaptureRequestConfig</span> <span class="token operator">=</span> GeneralRequestConfig <span class="token operator">&amp;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * ID of the transaction</span>
<span class="line">   */</span></span>
<span class="line">  transactionId<span class="token operator">:</span> <span class="token builtin">string</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Request body of capture API</span>
<span class="line">   */</span></span>
<span class="line">  body<span class="token operator">:</span> CaptureRequestBody</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="response-body" tabindex="-1"><a class="header-anchor" href="#response-body"><span>Response Body</span></a></h3><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">PayInfo</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * A payment method used to process the payment</span>
<span class="line">   * - Credit card: CREDIT_CARD</span>
<span class="line">   * - Balance: BALANCE</span>
<span class="line">   * - Discount: DISCOUNT</span>
<span class="line">   */</span></span>
<span class="line">  method<span class="token operator">:</span> <span class="token string">&#39;CREDIT_CARD&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;BALANCE&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;DISCOUNT&#39;</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Payment amount</span>
<span class="line">   */</span></span>
<span class="line">  amount<span class="token operator">:</span> <span class="token builtin">number</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Info</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * An order ID sent from the merchant when reserving a payment.</span>
<span class="line">   */</span></span>
<span class="line">  orderId<span class="token operator">:</span> <span class="token builtin">string</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * A transaction ID returned as the payment reservation result (19 digits).</span>
<span class="line">   */</span></span>
<span class="line">  transactionId<span class="token operator">:</span> <span class="token builtin">string</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Payment information</span>
<span class="line">   */</span></span>
<span class="line">  payInfo<span class="token operator">:</span> PayInfo<span class="token punctuation">[</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CaptureResponseBody</span> <span class="token operator">=</span> GeneralResponseBody <span class="token operator">&amp;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token doc-comment comment">/**</span>
<span class="line">   * Capture information</span>
<span class="line">   */</span></span>
<span class="line">  info<span class="token operator">:</span> Info</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="return-code" tabindex="-1"><a class="header-anchor" href="#return-code"><span>Return Code</span></a></h3><h4 id="success" tabindex="-1"><a class="header-anchor" href="#success"><span>Success</span></a></h4><table><thead><tr><th style="text-align:center;">Code</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">0000</td><td style="text-align:left;">Success</td></tr></tbody></table><h4 id="error" tabindex="-1"><a class="header-anchor" href="#error"><span>Error</span></a></h4><table><thead><tr><th style="text-align:center;">Code</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:center;">1104</td><td style="text-align:left;">Non-existing merchant</td></tr><tr><td style="text-align:center;">1105</td><td style="text-align:left;">The merchant cannot use the LINE Pay.</td></tr><tr><td style="text-align:center;">1106</td><td style="text-align:left;">A header info error</td></tr><tr><td style="text-align:center;">1150</td><td style="text-align:left;">Cannot find the transaction history</td></tr><tr><td style="text-align:center;">1155</td><td style="text-align:left;">Wrong transaction number</td></tr><tr><td style="text-align:center;">1170</td><td style="text-align:left;">Balance of the member&#39;s account has been changed.</td></tr><tr><td style="text-align:center;">1172</td><td style="text-align:left;">A record of transaction with the same order number already exists.</td></tr><tr><td style="text-align:center;">1179</td><td style="text-align:left;">Unable to proceed the transaction.</td></tr><tr><td style="text-align:center;">1183</td><td style="text-align:left;">The payment amount should be greater than 0.</td></tr><tr><td style="text-align:center;">1184</td><td style="text-align:left;">The payment amount exceeds requested amount.</td></tr><tr><td style="text-align:center;">1198</td><td style="text-align:left;">Either API call has been duplicated or purchase API has been called while re-authorization was automatically processed (Repeat after several minutes).</td></tr><tr><td style="text-align:center;">1199</td><td style="text-align:left;">Internal request error</td></tr><tr><td style="text-align:center;">1280</td><td style="text-align:left;">A temporary error occurred while processing the credit card payment.</td></tr><tr><td style="text-align:center;">1281</td><td style="text-align:left;">A credit card payment error</td></tr><tr><td style="text-align:center;">1282</td><td style="text-align:left;">A credit card authorization error</td></tr><tr><td style="text-align:center;">1283</td><td style="text-align:left;">The payment was refused due to suspected fraud.</td></tr><tr><td style="text-align:center;">1284</td><td style="text-align:left;">The credit card payment has temporarily stopped.</td></tr><tr><td style="text-align:center;">1285</td><td style="text-align:left;">Missing credit card payment information</td></tr><tr><td style="text-align:center;">1286</td><td style="text-align:left;">Wrong credit card payment information</td></tr><tr><td style="text-align:center;">1287</td><td style="text-align:left;">The credit card has been expired</td></tr><tr><td style="text-align:center;">1288</td><td style="text-align:left;">The credit card has low balance</td></tr><tr><td style="text-align:center;">1289</td><td style="text-align:left;">Exceeded the credit card limit</td></tr><tr><td style="text-align:center;">1290</td><td style="text-align:left;">Exceeded the limit of the credit card per payment</td></tr><tr><td style="text-align:center;">1291</td><td style="text-align:left;">The card has been reported as a stolen card.</td></tr><tr><td style="text-align:center;">1292</td><td style="text-align:left;">The card has been suspended.</td></tr><tr><td style="text-align:center;">1293</td><td style="text-align:left;">A CVN input error</td></tr><tr><td style="text-align:center;">1294</td><td style="text-align:left;">The card is listed on the blacklist.</td></tr><tr><td style="text-align:center;">1295</td><td style="text-align:left;">A wrong credit card number</td></tr><tr><td style="text-align:center;">1296</td><td style="text-align:left;">Unable to proceed the amount</td></tr><tr><td style="text-align:center;">1298</td><td style="text-align:left;">The card has been declined.</td></tr><tr><td style="text-align:center;">9000</td><td style="text-align:left;">An internal error</td></tr></tbody></table><h3 id="example" tabindex="-1"><a class="header-anchor" href="#example"><span>Example</span></a></h3><h4 id="request" tabindex="-1"><a class="header-anchor" href="#request"><span>Request</span></a></h4><div class="language-typescript line-numbers-mode" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre><code><span class="line"><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> linePayClient<span class="token punctuation">.</span>capture</span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    transactionId<span class="token operator">:</span> <span class="token string">&#39;2021121300698360310&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    body<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      currency<span class="token operator">:</span> <span class="token string">&#39;TWD&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      amount<span class="token operator">:</span> <span class="token number">1000</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="response" tabindex="-1"><a class="header-anchor" href="#response"><span>Response</span></a></h4><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;returnCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0000&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;returnMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Success.&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;transactionId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2021121300698360310&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;orderId&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20211216002&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;payInfo&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BALANCE&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token number">900</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;method&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DISCOUNT&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token number">100</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;comments&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="addhandler" tabindex="-1"><a class="header-anchor" href="#addhandler"><span>addHandler</span></a></h2><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">addHandler</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>Returns <code>CaptureClient</code></p><p>Example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">client<span class="token punctuation">.</span><span class="token function">addHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> type<span class="token punctuation">,</span> req<span class="token punctuation">,</span> next<span class="token punctuation">,</span> httpClient <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token comment">// capture</span></span>
<span class="line">  <span class="token keyword">return</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="addhandlers" tabindex="-1"><a class="header-anchor" href="#addhandlers"><span>addHandlers</span></a></h2><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token function">addHandlers</span><span class="token punctuation">(</span><span class="token operator">...</span>handlers<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>Returns <code>CaptureClient</code></p><p>Example:</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">client<span class="token punctuation">.</span><span class="token function">addHandlers</span><span class="token punctuation">(</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> req<span class="token punctuation">,</span> next <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> req<span class="token punctuation">,</span> next <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> req<span class="token punctuation">,</span> next <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: sean.enylin@gmail.com">Sean Lin</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/line-pay-merchant/api-reference/confirm.html" aria-label="Confirm API"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Confirm API</span></div></a><a class="route-link auto-link next" href="/line-pay-merchant/api-reference/void.html" aria-label="Void API"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Void API</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/line-pay-merchant/assets/app-Dmg8qoQ-.js" defer></script>
  </body>
</html>
